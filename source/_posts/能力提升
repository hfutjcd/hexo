2017年
上半年的主要工作都聚焦在benchmark的收集、开发、优化上，主要针对atlanta平台，也包含phoenix平台。Benchmark开发主要目的有两个，一是对VP6核的性能测试分析，二是对产品开发提供支持。目前benchmark测试VP6整体性能收益大约2.18倍，其中包括代码优化收益和产品升级收益。surf,lanzcos在AB上光变拍照场景中，针对现在11ms和30ms的性能，预计分别有5ms和7ms的收益，其它benchmark产品收益还在评估。同时输出了benchmark优化分析文档，可以帮助产品部门代码优化和新员工快速了解DSP。
在竞品(高通)分析方面，完成了软件环境的搭建，可以基于软件环境进行程序开发，但是由于使用高通平台的手机DSP没有对外开放，目前还没有竞品分析的硬件环境。目前的软件开发环境可以为以后硬件开发保存，拿到硬件环境之后，可以很快与软件环境对接，省去软件环境搭建时间。
"2017年，主要工作可以分两部分：
1.Benchmark的开发和维护，BM主要目的是保证DSP的竞争力和性能持续演进。同时作为自研核需求输入。BM工作对于个人能力提升起了很大作用，在优化的过程中，学到了很多DSP深层知识，包括如何设计内存，更大的利用DMA效率，如何设计代码架构，更好的利用代码流水。如何调整指令，更高效的利用DSP的指令槽。通过benchmark的开发，对DSP有了更深的理解。
2.CPE硬化软件辅助方案的分析和评估，通过对拍照、预览以及AR新场景的分析，了解了大部分的拍照后处理流程，以及相关场景中大部分的算法，能够从计算pattern，数据流，数据位宽等多个维度评估算法是否适合DSP加速以及加速比，学习如何合理进行软硬件划分，达到系统最优性能。同时在评估的过程中，经常与相关部门沟通，建立了良好的合作关系，能够更好的收集DSP需求，制定DSP芯片规划指标，持续提升芯片竞争力。

2018年
H1:
"1.完成Benchmark V120更新，通过对AI,SLAM TRACK,HDR和结构光等场景的分析，提取出AIP，大矩阵乘，16bit GuassFilter，Speckle Filter等Benchmark，并进一步优化，平均矢量指令并行度达到3以上。
2.分析Scatter指令代替Histogram TIE指令的性能和收益，640x480分辨率下性能下降1ms,以大光圈预览场景为例，整体性能下降<2%。
3.SLAM MAPPing模块目前梳理出算法框架并定位出热点模块，由于MAPPing模块比较复杂，后续需要进一步分析加速方案，提取相应Benchmark。"	
"1.拉通中硬和海思评估硬件特征点匹配的性能和效果，目前初步评估性能4.5ms,视差效果满足要求。可以使用硬件计算特征点匹配（自学习模块），DSP留出约10ms给美颜或VBK使用。
2.ORB性能评估达到要求，分析VBK新增的趣味光斑滤波对整个系统流程/性能影响,与李自亮评估的时延增加20ms相比，我们评估时延增加<4ms,VBK整体时延24ms@480Mhz。输出文档《Atlanta和Phoenix结构光深度计算系统设计备选方案》（DSP软件方案部分），"	
1.通过Benchmark验证Vision Q6核性能，同频下性能是VP6的1.058倍，0.8/0.7/0.65V电压下分别是VP6的1.58/1.41/1.40倍。达到VQ核>30%性能提升目标。输出文档《Phoenix  Vision Q6 DSP 平台性能评估和软件移植分析报告》	
"1支撑ORB DSP软件部分（自学习模块）落地Atlanta，协助定位落地过程中遇到的问题，目前已经落地，时延7~8ms@415Mhz，没有发现新的问题。
2.结构光模块已经完成代码集成，正在准备压测。测试性能12ms@415Mhz，其中IVP调度耗时>6ms，海思正在优化，预计IVP调度优化到<1ms。与原始ACPU性能35ms相比，预计收益28ms。
3.评估大光圈预览趣味光斑滤波模块新增算法耗时约4ms@415Mhz，已经协助何红烨完成代码开发，Atlanta上VBK整体性能约18.5ms@415Mhz。"	
BMV120及需求已经交付海思。	

H2:
"1.完成SLAM VIO-Tracking模块分析,支持整体功耗70mA目标。该模块在性能（13ms）不增加的基础上移植到DSP，达到降功耗目的。预计功耗5mA，相对CPU有20mA收益，满足对DSP的功耗需求。
2.对算法的修改的要求主要是定点降位宽和降内存等，已经反馈给算法团队。
3.识别出三个热点模块支持DSP性能评估，shitaomasi计算，大矩阵乘法。已经开发完成，并深度优化。
输出《AR SLAM Tracking线程DSP实现可行性分析和备选方案设计》
4.参与评估TOF中anisotropic filter模块DSP性能评估，支撑TOF硬化方案设计。"	
"1.通过高通的开发板测试了高通DSP的功耗，主要有7个benchmark，bilateral，histogram，integrate，ersion，dilation，dhystone，guassFilter。主要测试了各benchmark在L2cache/VTCM下定频性能和DCVS性能。
性能：855/phoenix 2.9倍(VTCM)
能效：855/Phoenix 0.94倍(VTCM)
同时深入分析了高通DSP的软件架构、内存管理机制、硬件架构与VQ6的的区别。
输出《终端DSP竞争分析.docx》三分之一稿"	
"1.VQ6核功耗验证，DVFS下：Vp6/VQ6 1.43倍。(DVFS下：Vp6 0.65v，VQ6 0.6V)
输出《Phoenix  Vision Q6 DSP 平台性能评估和软件移植分析报告》，已经提供给多媒体，支撑Orlando项目DSP代码移植。
2.看顾大光圈预览中趣味光斑（2ms何红烨)落地HL项目。
3.结构光落地LAYA项目（7~12ms@415Mhz）。录入和解锁5~6ms，animoji等三方应用12~22ms(增加depth2rgb模块）。
其中提取的连通域滤波Benchmark在大光圈预览中也有使用(<2ms)。"	
1.TOF参与anisotropic filter性能优化，整体性能提升一倍(该模块占系统时延60%)，PCT手机采用CPU+DSP方案，达成TOF在辅助对焦，体感游戏，大光圈虚化等应用场景的性能需求；P系统手机采用全DSP方案，达到30fps@240x180性能要求。功耗30mA,相对PCT手机有70mA收益。	

总结：
"2018下半年主要公主围绕Baltimore平台规划展开，主要包括：
AR场景SLAM VIO-Tracking算法DSP需求分析，从整体分析看，该模块可以移植到DSP，整体性能相对CPU（13ms）不增加，功耗5mA，相对CPU有20mA收益，需要双DSP支持。但是对算法还是有很大的约束，需要做较大的修改，包括降位宽和降内存等，相关约束已经反馈给算法团队。通过计算热点分析，提取三个benchmark作DSP性能需求。
竞品分析工作，通过高通的开发板测试了高通DSP的功耗，主要benchmark有7个，bilateral，histogram，integrate，ersion，dilation，dhystone，guassFilter。大部分都是高通配套工具提供的demo，已经经过深度优化。主要测试了各benchmark在L2cache/VTCM下定频性能和DCVS性能。同时深入分析了高通DSP的软件架构、内存管理机制、硬件架构与VQ6的的区别。目前以845的性能及855相对规格推测，855 DSP相对Phoenix DSP，性能是2.9倍，能效是0.94倍。输出《终端DSP竞争分析.docx》为DSP规划提供参考。
TOF深度计算评估和算法优化，Phoenix平台增加TOF模块，CPU性能不稳定，功耗过高，需要DSP提供低功耗方案。我们通过分析整个系统算法，提供DSP优化方案，同时参与复杂模块的性能优化工作。anisotropicfilter模块整体性能提升一倍。PCT手机采用CPU+DSP方案，达成TOF在辅助对焦，体感游戏，大光圈虚化等应用场景的性能需求；P系统手机采用全DSP方案，达到30fps@240x180性能要求。功耗30mA,相对PCT手机有70mA收益。"	

2019年

H1:
1.完成AIP DSP代码1.0、2.0版本的开发，总开发代码量约1万2千行：
    1.0版本仿真性能<2ms@415Mhz,落地到TL的video super night,多媒体部门已经集成代码，并增加部分算法，测试性能7.8ms@553Mhz，其中预计调用时延占3.5ms，其它还没有具体分解。
2.0版本计算量增加6倍左右，部分层位宽增加到16bit，性能15ms@553Mhz,根据最新测试数据，相对于NPU功耗降低50mA。
在AIHDR场景下还存在闪烁问题，推测是定点化算法精度不够，多媒体还在定位。
2.集成cPipe仿真环境，提供给AI技术部做效果仿真，第一轮DXO打分AEvideo单项提升4分。
3.重构俄研定点化代码，支撑任意<16bit的仿真，提供给AI技术部仿真任意bit效果，提高精度。
4.AWB算法移植到CPU，暂时不需要分析。
5.Q855还没有开发板，分析工作没有开展。
１.协助李强完成DSP上软件性能分析，同时协助吴世东完成Phoenix平台核心模块性能优化，15ms@553Mhz，其中优化部分性能提升30％。

H2:
拉通算法和产品部门测试GPU,NUP,DSP上的五种去闪烁方案，效果对齐后，采用GPU 16bit浮点作为支撑产品发布的方案。最终方案采用DSP 11bit，分析给出性能，功耗，人力预估供产品部门决策参考。	
1.	提出4K场景下1/64分辨率作圆形滤波和导向滤波方案，与算法和多媒体对齐，效果满足要求。输出圆形滤波（14ms@640Mhz,37.4mA）和导向滤波(29.6ms@640MHz,50.9mA)benchmark，完成DSP上的性能分析和方案设计。
输出《备选方案设计初稿》，后续完成终稿交付产品部门。
2.	拉通多媒体验证硬化的guidedFilter模块在虚化算法中的效果和性能。硬化算法与虚化算法中的guidedFilter具体实现不同，效果无法满足要求。	　
1.	分析圆形滤波算法硬化的可行性和价值，由于硬化面积大，收益相对于DSP不明显，最后决策采用DSP方案。
2.	完成大光圈录像场景圆形滤波和GuidedResize对DSP的算力和带宽需求分析(2个VQ6@0.65V算力),设计DDR带宽优化方案（由3.6GB/s降到2GB/s)，输出大光圈虚化算法在DSP上的备选方案设计。
3.	提供circleFilter和guidedResize benchmark给Vector Core用于性能评估，确保vector Core满足算力需求。	
　
1.	通过gfx，测试了990平台和苹果A13的GPU ALU能力，990平台性能落后A13 40%左右。还需要进一步ALU性能差距对游戏场景的影响。
2.	分析GPU vulkan编程流程，完成手机GPU texture benchmark，待测试不同vertex数下的GPU性能(模型含50万三角形，离屏帧率83fps@G76 600Mhz)，待metal版对应demo开发完成后，可以更细粒度的分析我司GPU与竞品的差异。
3.	分析不同竞品的GPU硬件架构，包括ARM，苹果，imagenation等。了解光线追踪算法和以色列的光追算法加速专利。	

年度总结：
今年主要工作内容包括两部分，Phoenix平台方案落地和Baltimore/Charlotte平台方案设计和需求分析。

1.Pxxx平台主要是xxxx场景中xxx网络开发，代码量1万2千行，在网络变化计算量增加6倍，部分层位宽增加到16bit的情况下，通过极致优化，确保时延增加<4倍，相比NPU，功耗节省50mA。针对俄研定点化算法精度问题导致视频闪烁的情况，深入分析定点化算法，不断提升定点化精度，降低视频闪烁情况。同时搭建完整端到端的Cpipe仿真环境提供给算法部门用于PQ仿真测试，最终支撑DXO video打分达标。目前AIP网络DSP方案已经落地TL项目，正在落地AE项目和Denver平台。其次是协助多媒体做TOF核心模块的性能优化，其中优化部分性能提升30%，满足了性能需求。

2.Bxxx平台，仿真评估大光圈录像场景采用guidedFilter硬件模块的效果和方案，由于算法不同，硬化模块无法满足PQ需求。针对4K录像新特性，分析1/16分辨率圆形滤波性能无法满足要求，提出采用1/64分辨率圆形滤波方案，拉通多媒体和算法部门，评估DSP的圆形滤波模块采用1/64分辨率的效果，确保效果满足要求。同时分析DSP上的性能和方案设计，并开发circleFilter和GuidedFilter DSP benchmark,确保性能数据可验可测，该benchmark可直接用于Baltimore平台，减少产品开发工作量。

3.Charlotte平台，根据4K录像场景，提取DSP的算力需求，提供相关benchmark给vector和PAC团队作方案参考，确保vector和PAC能力满足我们对DSP的算力需求。分析circleFilter模块硬化可行性和收益，由于硬化面积较大，相对于DSP方案收益不明显，最后采用DSP软件方案。

2020:
H1:
1.	根据ISPNN和游戏超分场景，设计基于layerfusion的整网融合方案，确保录像4k30fps性能功耗达标。
2.	分析部分竞品平台硬件性能。后续输出竞品分析报告。
3.	高帧率性能分析：完成了渲染流程分析，搭建测试环境，编写性能分析工具，提供给功耗测试部门测试分析。
1.	联合功耗测试部们构造覆盖热点场景的测试用例，目前已提取Benchmark数量：
整网级：10个
Bock级：12个
算子级：>100个
2.	完成基于mtk800平台的端到端测试环境搭建。
3.	完成测试工具ipu_test的编译环境搭建，可独立修改测试工具。
1.	完成ISPNN场景低功耗系统方案的设计和分析，后续输出《ISPNN低功耗系统设计备选方案》。
2.	根据ISPNN/AIRAW/AISR场景及方案分析对xx平台NPU性能，TCM大小，带宽，接口等规格的详细需求。确保D2平台卖点场景xKxxfps下的功耗性能满足需求。
3.	基于xx平台的AI Benchmark，结合N+1/N+2(xx/xx芯片)平台新场景更新benchmark列表，用于D1/D2平台的需求分析和芯片验证。确保BM能代表产品需求，准确反映N+1/N+2平台实际性能。
1.	配合高峰完成AI游戏超分（AISR）场景的整体系统方案设计和各子流程的系统需求分析。
2.	提取AISR的Benchmark，分析对NPU的性能，带宽等的需求分析。

